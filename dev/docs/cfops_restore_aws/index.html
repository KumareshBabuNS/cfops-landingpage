<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="CFOps project page">
    <meta name="author" content="">
    <base href="http://localhost:1313/">
    <title>Ops Manager restore on AWS</title>

    
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    
    <link href="/css/landing-page.css" rel="stylesheet">

    
    <link href="/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    
    
    

</head>
<body>


<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="page-scroll navbar-brand" href="#intro">CFOps</a>
        </div>
        
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="page-scroll" href="#about">About</a>
                </li>
                <li>
                    <a class="page-scroll" href="./downloads/release">Downloads</a>
                </li>
				<li class="dropdown">
				          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Plugins <span class="caret"></span></a>
				          <ul class="dropdown-menu">
							<li><a class="page-scroll" href=./docs/cfops_plugin/>Documentation</a></li>  
				            <li role="separator" class="divider"></li>
							<li><a class="page-scroll" href="./plugins/mysql-plugin">MySql Plugin</a></li>
				          </ul>
				</li>
                <li>
                    <a class="page-scroll" href="./docs">Documentation</a>
                </li>
                <li>
                    <a class="page-scroll" href="#contact">Contact</a>
                </li>
            </ul>
        </div>
        
    </div>
    
</nav>


<section id="main">
  <div class="list-container">
    <div class="row">
      <div class="col-md-2">
        <aside class="site">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h2 class="panel-title">Documentation</h2>
    </div>
    <div>
      <div class="list-group">
        
          <a class="list-group-item" href="/docs/cfops_on_vsphere-ER/">ER backup on vSphere</a>
        
          <a class="list-group-item" href="/docs/cfops_restore_aws/">Ops Manager restore on AWS</a>
        
          <a class="list-group-item" href="/docs/cfops_restore_vsphere-ER/">ER restore on vSphere</a>
        
          <a class="list-group-item" href="/docs/cfops_restore_vsphere/">Ops Manager restore on vSphere</a>
        
          <a class="list-group-item" href="/docs/cfops_backup_aws/">Ops Manager backup on AWS</a>
        
          <a class="list-group-item" href="/docs/cfops_backup_vpshere/">Ops Manager backup on vSphere</a>
        
          <a class="list-group-item" href="/docs/cfops_plugin/">Plugin Installation</a>
        
      </div>
    </div>
  </div>
</aside>

      </div>
      <div class="col-md-8 text-left" style="padding-top: 50px;">
        

<h1 id="cfops-on-aws:72fbe051191ba8291c99615ceae1bfa6">CFOPS on AWS</h1>

<p>CFOps is an automation tool to backup and restore Pivotal Cloud Foundry (PCF). Currently CFOPS supports PCF 1.4 and above.
This guide describes step by step directions on running cfops restore tool on AWS.</p>

<h2 id="getting-started:72fbe051191ba8291c99615ceae1bfa6">Getting started</h2>

<p>CFOps can be installed on your Ops Manager host or a jump host that has access to Ops Manager and PCF deployments.</p>

<h3 id="download-the-cfops-binary:72fbe051191ba8291c99615ceae1bfa6">Download the CFOPS binary</h3>

<ol>
<li>Get the latest release for your OS from the <a class="page-scroll" href="./downloads/release">Downloads</a> page.</li>
</ol>

<h3 id="restore-ops-manager-on-aws:72fbe051191ba8291c99615ceae1bfa6">Restore Ops Manager on AWS</h3>

<ol>
<li><p>Execute <code>cfops restore</code> command with the help option</p>

<pre><code class="language-bash">ubuntu@pivotal-ops-manager: ./cfops restore --help
NAME:
cfops restore - restores from an archive to the target tile
USAGE:
cfops restore [command options] [arguments...]
DESCRIPTION:
restore --opsmanagerhost &lt;host&gt; --adminuser &lt;usr&gt; --adminpass &lt;pass&gt; --opsmanageruser &lt;opsuser&gt; --opsmanagerpass &lt;opspass&gt; -d &lt;dir&gt; --tile elastic-runtime
OPTIONS:
--destination, -d 		path of the Cloud Foundry archive [$CFOPS_DEST_PATH]
--tile, -t 				a tile you would like to run the operation on [$CFOPS_TILE]
--opsmanagerhost, --omh 	hostname for Ops Manager [$CFOPS_HOST]
--adminuser, --du 		username for Ops Mgr admin (Ops Manager WebConsole Credentials) [$CFOPS_ADMIN_USER]
--adminpass, --dp 		password for Ops Mgr admin (Ops Manager WebConsole Credentials) [$CFOPS_ADMIN_PASS]
--opsmanageruser, --omu 	username for Ops Manager VM Access (used for ssh connections) [$CFOPS_OM_USER]
--opsmanagerpass, --omp 	password for Ops Manager VM Access (used for ssh connections) [$CFOPS_OM_PASS]
</code></pre></li>

<li><p>Restore Ops Manager using <code>cfops restore</code><pre class='terminal'>
$ ./cfops restore &ndash;opsmanagerhost x.x.x.x &ndash;du xxx &ndash;dp xxx &ndash;omu ubuntu -d . -t ops-manager
<strong>Note:</strong> OpsManager VM password is not required because it uses the pem file from installation_settings file
</pre></p></li>

<li><p>Once the restore completes, you can verify it by logging into the OpsManager</p></li>
</ol>

<p><strong>Note:</strong>  cfops restore command can be run in debug mode by setting LOG_LEVEL=debug <pre class='terminal'>
ubuntu@pivotal-ops-manager: LOG_LEVEL=debug ./cfops restore &ndash;opsmanagerhost xx.xx.xx.xx &ndash;du xxx &ndash;dp xxx &ndash;omu ubuntu -d . -t ops-manager
</pre></p>

<h3 id="using-s3:72fbe051191ba8291c99615ceae1bfa6">Using S3</h3>

<p>You can use an s3 compatible blobstore to restore from if you prefer. You must set the following environment variables:</p>

<pre><code class="language-bash">export S3_ACCESS_KEY_ID=&quot;AKY83B2PMWVVY6EF89&quot;
export S3_SECRET_ACCESS_KEY=&quot;PO+DKjfdakDKFDJ/gVDJDIEDKJFE3ZHdL&quot;
export S3_BUCKET_NAME=pcfbackup
export S3_ACTIVE=true
</code></pre>

<p>where <code>S3_ACCESS_KEY_ID</code> and <code>S3_SECRET_ACCESS_KEY</code> are your own AWS credentials and <code>S3_BUCKET_NAME</code> is the name of the bucket where the restore files are stored.</p>

<p>To disable S3 restore, all you need to do is set <code>S3_ACTIVE=false</code></p>

      </div>
      <div class="col-md-2"></div>
    </div>
  </div>
</section>


<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
              Built with <a href="http://gohugo.io">Hugo</a>
            </div>
        </div>
    </div>
</footer>

<script src="/js/jquery-1.11.0.js"></script>


<script src="/js/jquery.easing.min.js"></script>


<script src="/js/bootstrap.min.js"></script>


<script src="js/landing-page.js"></script>



<script data-no-instant>document.write('<script src="/livereload.js?mindelay=10"></' + 'script>')</script></body>
</html>

