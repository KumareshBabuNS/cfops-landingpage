<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="CFOps project page">
    <meta name="author" content="">
    <base href="http://localhost:1313/">
    <title>ER restore on vSphere</title>

    
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    
    <link href="/css/landing-page.css" rel="stylesheet">

    
    <link href="/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    
    
    

</head>
<body>


<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="page-scroll navbar-brand" href="#intro">CFOps</a>
        </div>
        
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="page-scroll" href="#about">About</a>
                </li>
                <li>
                    <a class="page-scroll" href="./downloads/release">Downloads</a>
                </li>
				<li class="dropdown">
				          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Plugins <span class="caret"></span></a>
				          <ul class="dropdown-menu">
							<li><a class="page-scroll" href=./docs/cfops_plugin/>Documentation</a></li>  
				            <li role="separator" class="divider"></li>
							<li><a class="page-scroll" href="./plugins/mysql-plugin">MySql Plugin</a></li>
				          </ul>
				</li>
                <li>
                    <a class="page-scroll" href="./docs">Documentation</a>
                </li>
                <li>
                    <a class="page-scroll" href="#contact">Contact</a>
                </li>
            </ul>
        </div>
        
    </div>
    
</nav>


<section id="main">
  <div class="list-container">
    <div class="row">
      <div class="col-md-2">
        <aside class="site">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h2 class="panel-title">Documentation</h2>
    </div>
    <div>
      <div class="list-group">
        
          <a class="list-group-item" href="/docs/cfops_on_vsphere-ER/">ER backup on vSphere</a>
        
          <a class="list-group-item" href="/docs/cfops_restore_aws/">Ops Manager restore on AWS</a>
        
          <a class="list-group-item" href="/docs/cfops_restore_vsphere-ER/">ER restore on vSphere</a>
        
          <a class="list-group-item" href="/docs/cfops_restore_vsphere/">Ops Manager restore on vSphere</a>
        
          <a class="list-group-item" href="/docs/cfops_backup_aws/">Ops Manager backup on AWS</a>
        
          <a class="list-group-item" href="/docs/cfops_backup_vpshere/">Ops Manager backup on vSphere</a>
        
          <a class="list-group-item" href="/docs/cfops_plugin/">Plugin Installation</a>
        
      </div>
    </div>
  </div>
</aside>

      </div>
      <div class="col-md-8 text-left" style="padding-top: 50px;">
        

<h1 id="cfops-on-vsphere:0c959ec450f9dcc745dda5e17490a2c4">CFOPS on vSphere</h1>

<p>CFOPS is automation tool to backup and restore Pivotal Cloud Foundry(PCF). Currently CFOPS supports PCF 1.6.
This Guide will describe step by step directions on running cfops restore for Elastic Runtime tile on vSphere.</p>

<h1 id="prerequisite:0c959ec450f9dcc745dda5e17490a2c4">PreRequisite</h1>

<p>Prior to restoring the Elastic Runtime make sure OpsManager has been restored and Apply Changes completed successfully.</p>

<p><strong>Note:</strong> This is not a migration tool therefore it will only restore PostGres DB to PostGres DB and MySql to MySql.  Tool is not meant to be used to migrate your DB from PostGres to MySql for newer releases of PCF.</p>

<h1 id="step-1-download-the-cfops-tool-from-github:0c959ec450f9dcc745dda5e17490a2c4">Step 1 : Download the CFOPS tool from github</h1>

<ol>
<li><p>Sign into github.com using your github credentials</p></li>

<li><p>Access cfops latest release using following link : <a href="https://github.com/pivotalservices/cfops/releases/latest">https://github.com/pivotalservices/cfops/releases/latest</a></p></li>

<li><p>Download and save the cfops binaries - <code>cfops_binaries.tgz</code></p></li>
</ol>

<h1 id="step-2-restore-elastic-runtime-on-vsphere:0c959ec450f9dcc745dda5e17490a2c4">Step 2 : Restore Elastic Runtime on vSphere</h1>

<p>CFOps must be installed on your ops manager host as Ops manager host has access to Pivotal Cloud Foundry deployments which includes the elastic runtimes and BOSH.</p>

<ol>
<li>Upload <code>cfops_binaries.tgz</code> to Ops manager host.</li>

<li><p>Uncompress <code>cfops_binaries.tgz</code> into a directory and extract the binary content.<pre class='terminal'>
$ uncompress cfops_binaries.tgz
$tar xvf cfops_binaries.tar
pipeline/output/builds/
pipeline/output/builds/osx/
pipeline/output/builds/osx/cfops
pipeline/output/builds/win64/
pipeline/output/builds/win64/cfops.exe
pipeline/output/builds/linux64/
pipeline/output/builds/linux64/cfops
</pre></p></li>

<li><p>Traverse to <code>pipeline/output/builds/</code> directory to find your operating system specific directory : For example : linux64 or win64 for cfops linux executable or cfops.exe for win64.</p></li>

<li><p>Execute cfops command for verbose help option <pre class='terminal'></p>

<pre><code class="language-bash">ubuntu@pivotal-ops-manager: ./cfops restore --help
NAME:
cfops restore - restores from an archive to the target tile
USAGE:
cfops restore [command options] [arguments...]
DESCRIPTION:
restore --opsmanagerhost &lt;host&gt; --adminuser &lt;usr&gt; --adminpass &lt;pass&gt; --opsmanageruser &lt;opsuser&gt; --opsmanagerpass &lt;opspass&gt; -d &lt;dir&gt; --tile elastic-runtime
OPTIONS:
--destination, -d 		path of the Cloud Foundry archive [$CFOPS_DEST_PATH]
--tile, -t 				a tile you would like to run the operation on [$CFOPS_TILE]
--opsmanagerhost, --omh 	hostname for Ops Manager [$CFOPS_HOST]
--adminuser, --du 		username for Ops Mgr admin (Ops Manager WebConsole Credentials) [$CFOPS_ADMIN_USER]
--adminpass, --dp 		password for Ops Mgr admin (Ops Manager WebConsole Credentials) [$CFOPS_ADMIN_PASS]
--opsmanageruser, --omu 	username for Ops Manager VM Access (used for ssh connections) [$CFOPS_OM_USER]
--opsmanagerpass, --omp 	password for Ops Manager VM Access (used for ssh connections) [$CFOPS_OM_PASS]
</code></pre></li>

<li><p>Restore Elastic Runtime tile using <code>cfops restore &gt;</code><pre class='terminal'>
$ ER_VERSION=1.6  ./cfops restore &ndash;opsmanagerhost x.x.x.x  &ndash;omp xxxx  &ndash;du xxx &ndash;dp xxxx  &ndash;omu ubuntu -d . -t elastic-runtime
   </pre></p></li>

<li><p>Once the restore completes you can try targeting your CLI or logging into the Apps Manager to verify everything is restored./</p></li>
</ol>

<p><strong>Note:</strong>  cfops manager restore command can be run with LOG Level DEBUG mode <pre class='terminal'>
ubuntu@pivotal-ops-manager: ER_VERSION=1.6 LOG_LEVEL=debug ./cfops restore &ndash;opsmanagerhost xx.xx.xx.xx &ndash;omp x &ndash;du xxx &ndash;dp xxx &ndash;omu ubuntu -d . -t elastic-runtime
</pre></p>

      </div>
      <div class="col-md-2"></div>
    </div>
  </div>
</section>


<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4">
              Built with <a href="http://gohugo.io">Hugo</a>
            </div>
        </div>
    </div>
</footer>

<script src="/js/jquery-1.11.0.js"></script>


<script src="/js/jquery.easing.min.js"></script>


<script src="/js/bootstrap.min.js"></script>


<script src="js/landing-page.js"></script>



<script data-no-instant>document.write('<script src="/livereload.js?mindelay=10"></' + 'script>')</script></body>
</html>

